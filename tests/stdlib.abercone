@def map fn l =
{
    @if (l == nil) nil
    @else (fn (head l)) :: (map fn (tail l))
};



